# Технический контекст

## Текущий стек технологий
- Frontend: Vanilla JavaScript, HTML5, CSS3
- Backend: FastAPI (Python)
- База данных: PostgreSQL
- Аутентификация: JWT

## Зависимости
### Frontend
- XLSX.js для экспорта в Excel
- Chart.js для визуализации

### Backend
- FastAPI
- SQLAlchemy
- Alembic
- PyJWT
- uvicorn

## Планируемая модернизация

### Миграция на React
1. Этапы миграции:
   - Создание нового React-проекта
   - Постепенный перенос компонентов
   - Внедрение TypeScript
   - Настройка маршрутизации
   - Интеграция с существующим API

2. Новые зависимости:
   - React 18+
   - TypeScript
   - React Router
   - Redux Toolkit
   - Material-UI/Tailwind
   - Axios

### Контейнеризация
1. Docker-компоненты:
   - Frontend контейнер
   - Backend контейнер
   - PostgreSQL контейнер
   - Nginx для обратного прокси

2. Конфигурация:
   - docker-compose.yml
   - Dockerfile для каждого сервиса
   - .dockerignore

### Безопасность
1. Переменные окружения:
   - Учетные данные БД
   - Секреты JWT
   - API ключи
   - Настройки окружения

2. Конфигурация:
   - .env файлы для разных окружений
   - Валидация переменных окружения
   - Документация по настройке

## Требования к инфраструктуре
- Node.js 18+
- Python 3.9+
- Docker Engine
- Docker Compose
- Nginx 

## Архитектура развертывания
- Docker контейнеры для всех сервисов
- Порты:
  - FastAPI: 8000
  - PostgreSQL (finance_db): 5432
  - PostgreSQL (users_db): 5432
  - Redis: 6379
  - PgAdmin: 5050

## Конфигурация
### Переменные окружения
- Хранятся в `.env` файле
- Валидируются через Pydantic Settings
- Особое внимание к форматированию:
  - Числовые значения без комментариев
  - CORS_ORIGINS в формате списка URL
  - Корректные порты для всех сервисов

### База данных
- Две отдельные PostgreSQL базы
- Миграции через Alembic
- Подключение через SQLAlchemy

### Кэширование
- Redis для сессий и кэширования
- Настройка через переменные окружения

## Текущие технические проблемы
1. Проблема с REDIS_PORT в строке подключения
2. Необходимость очистки комментариев в .env
3. Валидация специфических форматов переменных окружения 